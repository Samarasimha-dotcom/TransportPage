<div class="card">
  <h2>Pick a Ride</h2>

  <form [formGroup]="filterForm" (ngSubmit)="refresh()" class="filters" novalidate>
    <label>
      Your Employee ID
      <input formControlName="employeeId" placeholder="E.g. EMP789" />
    </label>

    <label>
      Vehicle Type
      <select formControlName="vehicleType">
        <option *ngFor="let v of vehicleTypes" [value]="v">{{ v }}</option>
      </select>
    </label>

    <label>
      Time Reference (HH:mm)
      <input type="time" step="60" formControlName="timeReference" />
    </label>

    <button type="submit">Search</button>
  </form>

  <p *ngIf="msg" [class.success]="msg.type==='success'" [class.error]="msg.type==='error'">
    {{ msg.text }}
  </p>

  <!-- <div *ngIf="rides.length === 0" class="empty">No rides match within +/- 60 minutes.</div> -->

  <div class="ride-list" *ngIf="rides.length > 0">
    <div class="ride" *ngFor="let r of rides">
      <div class="info">
        <div><strong>Time:</strong> {{ r.time }}</div>
        <div><strong>From:</strong> {{ r.pickupPoint }} <strong>To:</strong> {{ r.destination }}</div>
        <div><strong>Vehicle:</strong> {{ r.vehicleType }} ({{ r.vehicleNo }})</div>
        <div><strong>Vacant Seats:</strong> {{ r.vacantSeats }}</div>
        <div><strong>Owner:</strong> {{ r.ownerEmployeeId }}</div>
      </div>
      <div class="actions">
        <button (click)="book(r)">Book</button>
      </div>
    </div>
  </div>
</div>
